# Changelog

## Next

Features:
- Added a manufacturer part number to the `ProductDto`

## v4.0.1

Bugfixes:
- Fixed handler return types
  - ProductsUpdateConsumer
  - ProductsUpdateSupplier
  - SingleOrderProvider
  - SingleOrderRequester
  - OrderProvider
  - OrderRequester
  - ProductProvider
  - ProductRequester

## v4.0.0

Breaking:
- Renamed `QueryOrderRequest.attributes` to `QueryOrderRequest.attributeValues` 
- Replaced all return types with `Raw{OriginalType}`. This ensures that optional properties remain optional
- Changed `SodaSync.Hooks.terminateRequest(HttpResponse)` to `SodaSync.Hooks.terminateRequest(RawHttpResponse)` 
- Filters and Patchers for data modification must be non-empty
- Removed TerminateRequestError. Use `SodaSync.hooks.terminateRequest(response)` instead.

Features:
- Added default values for arrays and record types in order to make them optional
- Added new Raw* types for using optional and default values together
- Added a TaxRate type (number, non-negative, <=100)
- Model validation
  - `value` (type) in Filters and Patchers
  - `pageSize` (>0) in `QueryRequest` and `QueryResult`
  - length of CurrencyCode
  - `divisor` (positive) in `MoneyDto`
  - `email` (email) in `CustomerDto`
  - `url` (url) in `ProductImageDto`
  - `taxRate` (TaxRate) in `ShipmentDto`

Changes:
- Migrated the dtos to zod objects. This allows us to validate the payloads and improve the overall developer experience.
- Changed the type of AppDetails.SdkVersion from "AppVersion" to "SdkVersionT"

## v3.4.0

Features:
- Added the push-products contract
- Added support for authenticating against OAuth 2 (OAuth2Client)
- Added the patch-products contract which allows product updates

## v3.3.2

Bugfixes:
- Rename updateOrder to updateOrders

## v3.3.1

Bugfixes:
- Add orders-update-supply and orders-update-consume as App Features

## v3.3.0
Features:
- Accept also properties of type array in a nested properties string
- Added a new NestedPropertiesRecursive type which allows filtering for properties in array elements
- Introduce `SodaSync.hooks` which allows to control the flow.
- Added missing id properties to AddressDto and CustomerDto
- Added a new enforce function which enforce types in unknown contexts
- Added a new order status PROCESSING 
- Added the paymentStatus Field to the OrderDto 
- Added the patch-orders contract which allows order updates

Deprecate:
- TerminateRequestError: This never worked. Use `SodaSync.hooks.terminateRequest(response)` instead.

## v3.2.2
First public release

## v3.2.1
Fix scripts in package.json

## v3.2.0

Features:
- pull-products contract added

- Changes:
- SdkVersion will be autogenerated during the build
- Replace QueryOrdersRequest.minUpdatedAt with filters
- AppFactory accepts now an argument feature.

## v3.1.0
Features:
- Added an TerminateRequestError

Change:
Contracts reorganized

## v3.0.1
Fix:
Scripts updated

## v3.0.0
Changes:
Project restructured and models reorganized

## v2.3.0
Features:
- Added the FeaturePairDetector

## v2.2.0
Changes:
- Changed the FeatureTriggerUrls types
- Removed the nullable type

## v2.1.1
Fix:
- Let the checkConfiguration method return a promise

## v2.1.0
Features:
- Added a getAll method for the ReadonlyKeyValueSet

## v2.0.0
Features:
- Changed the http stuff to async

Changes:
- Utils removed

## v1.3.0
Features:
- Converted the global SodaSync module to a constant to be able to use an interface.

## v1.2.1
Fixes:
- Packaging fixed

## v1.2.0
Features:
- Added a PageNumberConverter utility class.

Changes:
- Generating the barrels using barrelsby.

## v1.1.1
Fixes:
- Import the Nullable Type instead of using the global type

## v1.1.0
Features:
- Added the `registerApp` function to the `SodaSync` module.
